# app.py
import streamlit as st

st.set_page_config(page_title="MBTI 북&무비 추천", page_icon="📚🎬", layout="centered")

MBTI_RECS = {
    "INTJ": {
        "books": [
            ("문제 해결형 사고", "전략적이고 논리 좋아하는 너한테 잘 맞아 — 생각거리 많은 책."),
            ("어두운 미래의 설계자", "미래, 시스템, 계획 이런 거에 흥미 있는 사람에게 추천.")
        ],
        "movies": [
            ("인터스텔라", "복잡한 설정과 큰 주제 좋아하면 깊게 빠질 수 있어."),
            ("셔터 아일랜드", "심리·반전 좋아하는 INTJ에게 잘 맞아.")
        ]
    },
    "INTP": {
        "books": [
            ("호기심 연구소", "아이디어 떠올리기 좋아하는 사람에게 딱."),
            ("철학 산책", "사유하고 질문하는 걸 즐기는 너에게 추천.")
        ],
        "movies": [
            ("엑스 마키나", "인공지능, 윤리, 퍼즐 좋아하면 빠짐."),
            ("매트릭스", "현실과 가상, 철학적 질문 좋아하는 사람 취향.")
        ]
    },
    "ENTJ": {
        "books": [
            ("리더십 전략", "목표 지향적이고 실행력 있는 너에게 추천."),
            ("결정의 기술", "결단력을 키우고 싶은 사람에게 좋아.")
        ],
        "movies": [
            ("머니볼", "전략+데이터로 승부하는 이야기 좋아하면 굿."),
            ("글래디에이터", "리더십과 큰 목표를 다루는 영화.")
        ]
    },
    "ENTP": {
        "books": [
            ("아이디어 전쟁", "창의적 토론과 논쟁 즐기는 사람에게."),
            ("변화의 기술", "새로운 관점 찾는 걸 즐긴다면 추천.")
        ],
        "movies": [
            ("소셜 네트워크", "아이디어+도전 이야기 좋아하면 재밌어."),
            ("인셉션", "복잡하고 반전 많은 아이디어형 영화.")
        ]
    },
    "INFJ": {
        "books": [
            ("내면의 지도", "가치와 의미를 고민하는 너한테 추천."),
            ("작은 빛의 철학", "따뜻한 통찰과 공감을 주는 책.")
        ],
        "movies": [
            ("어거스트 러쉬", "감성적이고 의미 있는 서사 좋아하면 힐링됨."),
            ("이터널 선샤인", "사랑과 기억에 대한 섬세한 이야기.")
        ]
    },
    "INFP": {
        "books": [
            ("마음의 정원", "감수성 풍부한 너에게 딱 맞는 작품."),
            ("꿈꾸는 사람들", "자기표현과 공감에 좋은 책.")
        ],
        "movies": [
            ("하울의 움직이는 성", "환상적이고 감성적인 분위기 좋아하면 굿."),
            ("비포 선라이즈", "감정선과 대화 중심의 영화.")
        ]
    },
    "ENFJ": {
        "books": [
            ("사람을 움직이는 힘", "타인을 돕고 이끄는 걸 좋아하는 너에게."),
            ("공감의 기술", "관계에서 영향력 발휘하고 싶을 때 추천.")
        ],
        "movies": [
            ("리틀 미스 선샤인", "사람냄새 나는 이야기 좋아하면 마음에 들어."),
            ("굿 윌 헌팅", "사람의 성장과 연결을 다룬 영화.")
        ]
    },
    "ENFP": {
        "books": [
            ("모험하는 삶", "호기심 많고 에너지 넘치는 너에게 추천."),
            ("가능성의 기술", "새로운 경험과 영감을 주는 책.")
        ],
        "movies": [
            ("어바웃 타임", "따뜻하고 낙천적인 메시지 좋아하면 좋아함."),
            ("월터의 상상은 현실이 된다", "상상력과 희망을 다룬 영화.")
        ]
    },
    "ISTJ": {
        "books": [
            ("기본에 충실한 삶", "정리, 규칙, 책임감 있는 사람에게 추천."),
            ("역사에서 배우기", "사실 기반 지식과 체계적 사고 좋아하면 굿.")
        ],
        "movies": [
            ("셰인", "전통적 가치와 책임을 다루는 클래식한 이야기."),
            ("캐스트 어웨이", "의지와 절제, 생존 이야기 좋아하면 추천.")
        ]
    },
    "ISFJ": {
        "books": [
            ("작은 친절의 힘", "사람 돌보는 걸 좋아하는 너에게 딱."),
            ("기억의 편지", "감성적이고 안정감 있는 서사 추천.")
        ],
        "movies": [
            ("원더", "따뜻한 인간미와 성장 이야기 좋아하면 힐링됨."),
            ("굿바이 레닌!", "가족과 헌신을 다룬 감동작.")
        ]
    },
    "ESTJ": {
        "books": [
            ("실행의 기술", "계획하고 결과 내는 걸 즐기는 사람에게."),
            ("조직의 법칙", "리더십·관리 관심 있으면 추천.")
        ],
        "movies": [
            ("에린 브로코비치", "목표 향해 밀어붙이는 이야기 좋아하면 굿."),
            ("인셉션", "구조적이고 명확한 플롯 좋아하는 사람 취향.")
        ]
    },
    "ESFJ": {
        "books": [
            ("사람을 돕는 마음", "관계 중심적이고 따뜻한 스토리 좋아하면."),
            ("함께 성장하기", "실용적이고 공감 가는 조언 담김.")
        ],
        "movies": [
            ("운명이라는 건", "감동·휴먼 드라마 좋아하면 추천."),
            ("러브 액츄얼리", "다양한 인간관계와 감정들 다루는 영화.")
        ]
    },
    "ISTP": {
        "books": [
            ("손으로 만드는 지식", "실용적이고 기술적인 이야기 좋아하면."),
            ("침착한 문제 해결", "논리적·현장형 사고에 맞는 책.")
        ],
        "movies": [
            ("더 레이더스", "액션+기술적 요소 좋아하면 재밌음."),
            ("다크 나이트", "전투·전략·냉철한 캐릭터 취향일 수 있음.")
        ]
    },
    "ISFP": {
        "books": [
            ("감각의 기록", "예술적이고 감성적인 표현 좋아하면 추천."),
            ("조용한 여행", "자아 탐색과 자연 묘사에 좋은 책.")
        ],
        "movies": [
            ("콜 미 바이 유어 네임", "섬세한 감정 묘사와 미학 좋아하면 굿."),
            ("아멜리에", "따뜻한 비주얼과 소소한 기쁨을 담은 영화.")
        ]
    },
    "ESTP": {
        "books": [
            ("도전의 기술", "액션·모험 좋아하는 활동파에게 추천."),
            ("직감과 반응", "순간 판단력과 실전 감각을 다룬 책.")
        ],
        "movies": [
            ("007 시리즈(추천편)", "속도감 있고 액션 넘치는 영화."),
            ("매드 맥스: 분노의 도로", "달리고 부수는 시원한 액션 좋아하면 추천.")
        ]
    },
    "ESFP": {
        "books": [
            ("삶을 즐기는 법", "현재를 즐기고 사람들과 어울리는 걸 좋아하면."),
            ("무대 뒤의 이야기", "감각적이고 화려한 묘사 많은 책.")
        ],
        "movies": [
            ("라라랜드", "음악·즉흥성·화려함 좋아하면 즐길 영화."),
            ("스윙키즈", "에너지 넘치고 흥겨운 이야기 추천.")
        ]
    },
}

st.title("MBTI로 골라보는 책 📚 & 영화 🎬 추천")
st.write("원하는 MBTI를 고르면 그 유형에 어울리는 **책 2권**과 **영화 2편**을 추천해줄게 — 청소년에게 친근한 말투로 설명해줘. ✨")

mbti_list = sorted(MBTI_RECS.keys())
default = "INFP" if "INFP" in mbti_list else mbti_list[0]
choice = st.selectbox("너의 MBTI를 선택해줘:", mbti_list, index=mbti_list.index(default))

recs = MBTI_RECS.get(choice)

if recs:
    st.markdown(f"### {choice}님을 위한 추천\n")
    st.markdown("**📚 책 (2권)**")
    for idx, (title, note) in enumerate(recs["books"], 1):
        with st.expander(f"{idx}. {title}"):
            st.write(note)
            st.write("_이 책은 이런 성향의 사람에게 특히 잘 맞아._")
    st.markdown("**🎬 영화 (2편)**")
    for idx, (title, note) in enumerate(recs["movies"], 1):
        with st.expander(f"{idx}. {title}"):
            st.write(note)
            st.write("_분위기나 주제를 참고해서 골라봐!_")
    st.markdown("---")
    st.write("참고: 추천은 성향별로 ‘잘 맞을 가능성’이 높은 작품들을 골라봤어. 꼭 정답은 아니니까, 기분 따라 골라보는 것도 추천! 😄")
else:
    st.error("선택한 MBTI에 대한 추천이 없네. 다른 걸로 골라줘!")

st.caption("앱을 개선하고 싶으면 알려줘 — 더 많은 장르나 설명 추가해줄게. 💬")
